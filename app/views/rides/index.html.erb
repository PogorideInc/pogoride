<% if session[:user_id] %>
<div class="userdashboard">
  <ul class="nav nav-pills">
    
    <li><%= link_to "Profile", my_user_path(@user.id) %></li>
    <li class="dropdown">
      <%= link_to 'Rides <b class="caret"></b>'.html_safe, "", :class => 'dropdown-toggle', :'data-toggle' => 'dropdown'%>
      <ul class="dropdown-menu" role="menu">
        <li class="dropdown-link"><%= link_to "My Rides", my_rides_path(@ride) %></li>
        <li class="dropdown-link"><%= link_to "My Requests", requests_my_rides_path(@ride) %></li>
        <li class="dropdown-link"><%= link_to "My Drives", drives_my_rides_path(@ride) %></li>
      </ul>
    </li>
    <li><%= link_to "Need A Ride?", new_my_ride_path %></li>
    <li><%= link_to "Post A Drive", new_my_ride_path %></li>
    <li class="active all-rides-nav"><%= link_to "All Rides", rides_path %></li>
  </ul>
</div>
<% end %>

<div id="firstband firstbandback">
    <div class="container">
      <div class="row first" style="margin-bottom: 60px;">
        <h2 class="text-center" style="margin: 50px auto 10px;">All Rides</h2>
        <% if @rides.present? %>
          <% @rides.each do |ride| %>
            <div class="flip-container" ontouchstart="this.classList.toggle('hover');">
              <div class="flipper">
                <div class="front">
                  <div class="panel panel-default">
                    <div class="panel-heading"><span class="glyphicon glyphicon-road"></span><%= ride.from %><span class="glyphicon glyphicon-arrow-right"></span><%= ride.to %><span class="ride-cost">$<%= ride.donation_amt %></span>
                    </div>
                      <div class="panel-body">

                       <div class="media">
                        <a class="pull-left" href="#">
                         <%= image_tag ride.user.avatar.url(:medium), :class => 'small-pic' %>
                        </a>
                        <div class="media-body">
                          <h4 class="media-heading"></h4>
                            <div class="ride-info">
                              <p>
                                <%= ride.user.username %> has <%= ride.no_of_seats %> seats remaining.  <br/>
                                Leaving: <%= ride.ride_date.to_formatted_s(:long_ordinal) %>            <br/>
                              </p>
                            </div>
                          <button type="button" class="flip-btn btn btn-info">
                            Ride <br> Details
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
              </div>

              <div class="back">
                <div class="panel panel-default">
                  <div class="panel-heading"><span class="glyphicon glyphicon-road"></span><%= ride.from %><span class="glyphicon glyphicon-arrow-right"></span><%= ride.to %><span class="ride-cost">$<%= ride.donation_amt %></span></div>
                    <div class="panel-body">

                     <div class="media">
                     
                      <div class="media-body">
                        <h4 class="media-heading"></h4>
                          <div class="ride-info">
                            <p>
                              Description: <%= ride.description %><br/>      
                              Leaving: <%= ride.ride_date.to_formatted_s(:long_ordinal) %><br/>
                              Seats remaining: <%= ride.no_of_seats %><br/>
                            </p>
                          </div>
                          <button type="button" class="flip-btn btn btn-warning">
                          View <br> Ride
                        </button>
                       
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          <% end %> 
        <% end %> 
      </div>
    </div>
</div>

